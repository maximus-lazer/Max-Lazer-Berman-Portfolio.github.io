{%- assign has_range = include.page.start and include.page.end -%}
{%- assign has_single = include.page.date -%}

{%- comment -%} Build display_date safely (no capture, no trimming issues) {%- endcomment -%}
{%- assign display_date = '' -%}
{% if has_range %}
  {% assign left = include.page.start | date: "%b %Y" %}
  {% if include.page.present %}
    {% assign right = 'Present' %}
  {% else %}
    {% assign right = include.page.end | date: "%b %Y" %}
  {% endif %}
  {% assign display_date = left | append: ' â€“ ' | append: right %}
{% elsif has_single %}
  {% assign display_date = include.page.date | date: "%b %Y" %}
{% endif %}

<div class="card mb-3">
  <div class="row g-0">
    <div class="col-sm-6 col-md-4">
      <img src="{{ site.baseurl }}/{{ include.page.image }}" height="225px" class="rounded-start">
    </div>
    <div class="col-sm-6 col-md-8">
      <div class="card-body">
        <h5 class="card-title d-flex justify-content-between align-items-start">
          <span>{{ include.page.title }}</span>
          {% if display_date != '' %}
            <small class="text-muted">{{ display_date }}</small>
          {% endif %}
        </h5>

        {% if include.page.summary %}
          <p class="card-text">{{ include.page.summary }}</p>
        {% endif %}

        {% if include.page.labels %}
          <p class="mb-2">
            {% for label in include.page.labels %}
              <span style="background-color: var(--tf-pill-bg)" class="badge rounded-pill">{{ label }}</span>
            {% endfor %}
          </p>
        {% endif %}

        {% if include.page.projecturl %}
          <a href="{{ include.page.projecturl }}" class="btn btn-outline-dark">Project Site</a>
        {% else %}
          <a href="{{ site.baseurl }}{{ include.page.url }}" class="btn btn-outline-dark">Read More</a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
